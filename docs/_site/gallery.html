<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=81087ce44bb110bad0aadf4aebb2c0c867e7d737">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Here are a few examples of what you can do fairly easily in pftk: | Python Financial Toolkit - pftk</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Here are a few examples of what you can do fairly easily in pftk:" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Pyhon Financial Toolkit (pftk) is a Python-based open source software framework designed to support portfolio construction and management." />
<meta property="og:description" content="The Pyhon Financial Toolkit (pftk) is a Python-based open source software framework designed to support portfolio construction and management." />
<link rel="canonical" href="http://localhost:4000/gallery.html" />
<meta property="og:url" content="http://localhost:4000/gallery.html" />
<meta property="og:site_name" content="Python Financial Toolkit - pftk" />
<script type="application/ld+json">
{"headline":"Here are a few examples of what you can do fairly easily in pftk:","url":"http://localhost:4000/gallery.html","description":"The Pyhon Financial Toolkit (pftk) is a Python-based open source software framework designed to support portfolio construction and management.","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="http://github.com/charlesg/pftk">View on GitHub</a>

          <h1 id="project_title">Python Financial Toolkit - pftk</h1>
          <h2 id="project_tagline">The Pyhon Financial Toolkit (pftk) is a Python-based open source software framework designed to support portfolio construction and management.</h2>

          
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1 id="here-are-a-few-examples-of-what-you-can-do-fairly-easily-in-pftk">Here are a few examples of what you can do fairly easily in pftk:</h1>

<h2 id="investigate-how-market-events-affect-future-returns">Investigate how market events affect future returns</h2>

<p><img src="Eventstudy1.png" alt="Event Study" align="right" width="300px" />
Pftk’s event study software allows a developer to describe market events, then observe, statistically, how those events affect future equity prices. The plot at right illustrates the affect of the following market event:</p>

<ul>
  <li>Equity list: S&amp;P 500</li>
  <li>Event definition: (daily_return($SPX) &lt; -0.03) and (daily_return(equity) &lt; (daily_return($SPX) - 0.05))</li>
  <li>Event in English: The S&amp;P 500 index drops more than 3% and the equity drops 5% more than the market</li>
  <li>Result: This scan triggered 1704 events in 2008, 2009, 2010.  On average, when this occurred, the stock gained 5% relative to the market over 20 days.</li>
</ul>

<hr />

<h2 id="normalize-and-plot-historical-data">Normalize and plot historical data</h2>

<p>This is of course a basic task, but it is done quite easily with Python in pftk.  The data for the plot at right was created by reading in the closing prices of various equities, then normalizing their prices to 1.0 using one line of code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">normdat</span> <span class="o">=</span> <span class="n">pricedat</span><span class="o">/</span><span class="n">pricedat</span><span class="p">[</span><span class="mi">0</span><span class="p">,:]</span>
</code></pre></div></div>

<p><img src="Normalized2.png" alt="Normalized close prices for 4 equities" align="right" width="300px" />
That line of code nicely illustrates how concise Python (with NumPy) can be.  If you have MATLAB experience, you
will see that the syntax for these operations is quite similar in Python.  With
that concise statement we executed 2000 divide operations.  Each row in pricedat
was divided by the first row of pricedat.  Thus normalizing the data with respect to
the first day’s price.</p>

<hr />

<h2 id="compute-and-plot-daily-returns">Compute and plot daily returns</h2>

<p>It is very often useful to look at the returns by day for individual stocks.  We can compute this in Python as:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dailyrets = (pricedat[1:,:]/pricedat[0:-1,:]) - 1
</code></pre></div></div>

<p><img src="Rets.png" alt="The first 50 days of daily returns for $SPX and XOM." align="right" width="300px" />
In the figure at right we compare the daily returns for $SPX and XOM.  Observe that they tend to move together
but that XOM’s moves are more extreme.  This plot was created with the following code in Python:
<br />
<br />
<br />
<br />
<br />
<br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tsu.returnize0(normdat)
plt.plot(newtimestamps[0:50],normdat[0:50,3]) # $SPX 50 days
plt.plot(newtimestamps[0:50],normdat[0:50,4]) # XOM 50 days
plt.axhline(y=0,color='r')
plt.legend(['$SPX','XOM'])
plt.ylabel('Daily Returns')
plt.xlabel('Date')
savefig('rets.pdf',format='pdf')
</code></pre></div></div>

<hr />

<h2 id="look-for-correlations-in-daily-returns">Look for correlations in daily returns</h2>

<p><img src="Scatter2.png" alt="A scatter plot of $SPX versus XOM daily returns." align="right" width="300px" />
The scatter plots at right show how the movement in price of the S&amp;P 500 index ($SPX) relate to XOM (top) and GLD (bottom).  Scatter plots are generated using the “scatter” command:</p>

<p><br /><br /><br /><br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> plt.scatter(dailyrets[:,0],dailyrets[:,1],c='blue')
</code></pre></div></div>

<p><img src="ScatterSPXvGLD.png" alt="A scatter plot of $SPX versus GLD daily returns." align="right" width="300px" />
Note that XOM and $SPX seem strongly correlated, as evidenced by the tight scatter plot.  On the other hand $SPX and GLD are substantially less correlated.  It is easy to carry this sort of analysis further using many of the statistical tools available in NumPy and Pandas.</p>

<p><br /><br /><br /><br /></p>

<hr />

<h2 id="create-and-assess-technical-indicators">Create and assess technical indicators</h2>

<p><img src="Movingavg-ex2.png" alt="20-day moving average." align="right" width="300px" />
The plots show two technical indicators coded using pftk: A 20-day moving average (top), and 20-day Bollinger bands (bottom). The features are coded easily using Pandas and NumPy calls, such as the following code example for 20-day moving averages:</p>

<p><br /><br /><br /></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> means = pandas.rolling_mean(adjcloses,20,min_periods=20)
</code></pre></div></div>

<p><img src="Bollingerex.png" alt="Bollinger bands." align="right" width="300px" />
<br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<hr />

<h2 id="leverage-machine-learning-tools-to-discover-data-relationships">Leverage machine learning tools to discover data relationships</h2>

<p><img src="Scatterdata2.png" alt="Randomly queried points in a KNN-based model." align="right" width="300px" />
Pftk includes several machine learning algorithms including HMM learning, KNN and K-D tree learning.
<br /><br /><br /><br /><br /><br /><br /></p>

<hr />

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        
        <p class="copyright">Python Financial Toolkit - pftk maintained by <a href="http://github.com/charlesg">charlesg</a></p>
        
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    
  </body>
</html>
